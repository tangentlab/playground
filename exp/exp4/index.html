<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Three Fiber - 3D Model with Hotspots</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            overflow: hidden;
        }

        #root {
            width: 100vw;
            height: 100vh;
        }

        .ui-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            max-width: 300px;
        }

        .hotspot-panel {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            max-width: 350px;
            min-width: 280px;
            z-index: 1000;
            transform: translate(-50%, -50%);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .hotspot-panel h3 {
            margin: 0 0 15px 0;
            color: #2a5298;
            font-size: 1.4em;
        }

        .hotspot-panel p {
            margin: 10px 0;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .hotspot-panel .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            transition: color 0.2s;
        }

        .hotspot-panel .close-btn:hover {
            color: #333;
        }

        .hotspot-indicator {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #ff6b6b, #ff4757);
            border: 3px solid white;
            border-radius: 50%;
            cursor: pointer;
            transform: translate(-50%, -50%);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            animation: pulse 2s infinite;
            z-index: 50;
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            }
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .controls p {
            margin: 5px 0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <div class="ui-overlay">
        <h2>ðŸš€ 3D Model Explorer</h2>
        <p>Explore the 3D spacecraft model by clicking on the glowing hotspots to learn more about different components.</p>
    </div>

    <div class="controls">
        <p><strong>Controls:</strong></p>
        <p>â€¢ Left click + drag: Rotate</p>
        <p>â€¢ Scroll: Zoom in/out</p>
        <p>â€¢ Click hotspots for details</p>
    </div>

    <!-- React and Three.js CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
    <script src="https://unpkg.com/@react-three/fiber@8.15.11/dist/index.umd.js"></script>
    <script src="https://unpkg.com/@react-three/drei@9.88.13/dist/index.umd.js"></script>

    <script type="text/babel" src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { Canvas } = window.ReactThreeFiber;
        const { OrbitControls, Text, Sphere, Box, Cylinder, Cone } = window.Drei;
        const { useState, useRef, useEffect } = React;
        const { Vector3 } = THREE;

        // Hotspot data with detailed information
        const hotspotData = [
            {
                id: 1,
                position: [2, 1, 0],
                title: "Engine Thrust Vector",
                description: "Advanced ion propulsion system capable of generating 50,000 Newtons of thrust. Features gimbal mounting for precise directional control during orbital maneuvers.",
                details: "The engine uses xenon gas as propellant and can operate continuously for months, making it ideal for deep space missions."
            },
            {
                id: 2,
                position: [-1.5, 2, 1],
                title: "Solar Panel Array",
                description: "High-efficiency photovoltaic panels generating 15kW of power. Triple-junction gallium arsenide cells provide maximum energy conversion even at vast distances from the sun.",
                details: "The panels can rotate 360Â° to maintain optimal sun exposure throughout the mission duration."
            },
            {
                id: 3,
                position: [0, -1, 2],
                title: "Communication Dish",
                description: "Primary deep space communication array operating on X-band frequency. Provides high-speed data transmission back to Earth at distances up to 1 billion kilometers.",
                details: "Features advanced error correction and can maintain contact even when partially obscured by planetary bodies."
            },
            {
                id: 4,
                position: [1, 0, -2],
                title: "Scientific Instruments",
                description: "Integrated sensor package including spectrometers, magnetometers, and particle detectors. Capable of analyzing atmospheric composition and magnetic field variations.",
                details: "The instruments are radiation-hardened and can operate in extreme temperature ranges from -180Â°C to +120Â°C."
            },
            {
                id: 5,
                position: [-2, -1, 0],
                title: "Fuel Storage",
                description: "Pressurized xenon storage tanks containing 400kg of propellant. Advanced composite materials ensure zero leakage over mission duration of 10+ years.",
                details: "Multiple redundant systems monitor pressure and flow rates to optimize fuel consumption throughout the mission."
            }
        ];

        // Hotspot component that renders clickable indicators
        function Hotspot({ position, onClick, isActive }) {
            const meshRef = useRef();

            useEffect(() => {
                if (meshRef.current) {
                    // Add pulsing animation
                    const animate = () => {
                        if (meshRef.current) {
                            meshRef.current.scale.setScalar(1 + Math.sin(Date.now() * 0.005) * 0.2);
                        }
                        requestAnimationFrame(animate);
                    };
                    animate();
                }
            }, []);

            return (
                <mesh
                    ref={meshRef}
                    position={position}
                    onClick={onClick}
                >
                    <sphereGeometry args={[0.1, 16, 16]} />
                    <meshBasicMaterial
                        color={isActive ? "#ff4757" : "#ff6b6b"}
                        transparent
                        opacity={0.8}
                    />
                    {/* Outer glow ring */}
                    <mesh scale={[2, 2, 2]}>
                        <ringGeometry args={[0.08, 0.12, 16]} />
                        <meshBasicMaterial
                            color="#ffffff"
                            transparent
                            opacity={0.3}
                            side={THREE.DoubleSide}
                        />
                    </mesh>
                </mesh>
            );
        }

        // Spacecraft 3D model built from primitive shapes
        function SpacecraftModel() {
            return (
                <group>
                    {/* Main body */}
                    <mesh position={[0, 0, 0]}>
                        <cylinderGeometry args={[0.8, 1.2, 3, 8]} />
                        <meshStandardMaterial color="#c0c0c0" metalness={0.8} roughness={0.2} />
                    </mesh>

                    {/* Engine nozzle */}
                    <mesh position={[2, 0, 0]} rotation={[0, 0, Math.PI / 2]}>
                        <coneGeometry args={[0.6, 1.5, 8]} />
                        <meshStandardMaterial color="#ff4500" metalness={0.9} roughness={0.1} />
                    </mesh>

                    {/* Solar panels */}
                    <mesh position={[-1.5, 2, 0]} rotation={[0, 0, 0]}>
                        <boxGeometry args={[0.1, 2, 4]} />
                        <meshStandardMaterial color="#1a1a2e" metalness={0.1} roughness={0.9} />
                    </mesh>
                    <mesh position={[-1.5, -2, 0]} rotation={[0, 0, 0]}>
                        <boxGeometry args={[0.1, 2, 4]} />
                        <meshStandardMaterial color="#1a1a2e" metalness={0.1} roughness={0.9} />
                    </mesh>

                    {/* Communication dish */}
                    <mesh position={[0, -1, 2]} rotation={[Math.PI / 4, 0, 0]}>
                        <cylinderGeometry args={[0.8, 0.8, 0.1, 16]} />
                        <meshStandardMaterial color="#ffffff" metalness={0.7} roughness={0.3} />
                    </mesh>

                    {/* Instrument bay */}
                    <mesh position={[1, 0, -2]}>
                        <boxGeometry args={[0.8, 0.8, 0.8]} />
                        <meshStandardMaterial color="#4a4a4a" metalness={0.5} roughness={0.5} />
                    </mesh>

                    {/* Fuel tanks */}
                    <mesh position={[-2, -1, 0]}>
                        <cylinderGeometry args={[0.4, 0.4, 1.5, 8]} />
                        <meshStandardMaterial color="#2c5aa0" metalness={0.8} roughness={0.2} />
                    </mesh>
                    <mesh position={[-2, 1, 0]}>
                        <cylinderGeometry args={[0.4, 0.4, 1.5, 8]} />
                        <meshStandardMaterial color="#2c5aa0" metalness={0.8} roughness={0.2} />
                    </mesh>
                </group>
            );
        }

        // Main scene component
        function Scene({ onHotspotClick, activeHotspot }) {
            return (
                <>
                    {/* Lighting */}
                    <ambientLight intensity={0.4} />
                    <pointLight position={[10, 10, 10]} intensity={1} />
                    <pointLight position={[-10, -10, -10]} intensity={0.5} />

                    {/* Spacecraft */}
                    <SpacecraftModel />

                    {/* Hotspots */}
                    {hotspotData.map((hotspot) => (
                        <Hotspot
                            key={hotspot.id}
                            position={hotspot.position}
                            isActive={activeHotspot?.id === hotspot.id}
                            onClick={(e) => {
                                e.stopPropagation();
                                onHotspotClick(hotspot);
                            }}
                        />
                    ))}

                    {/* Controls */}
                    <OrbitControls
                        enablePan={true}
                        enableZoom={true}
                        enableRotate={true}
                        maxDistance={20}
                        minDistance={3}
                    />
                </>
            );
        }

        // Hotspot detail panel component
        function HotspotPanel({ hotspot, onClose, position }) {
            if (!hotspot) return null;

            return (
                <div
                    className="hotspot-panel"
                    style={{
                        left: position.x,
                        top: position.y,
                    }}
                >
                    <button className="close-btn" onClick={onClose}>Ã—</button>
                    <h3>{hotspot.title}</h3>
                    <p><strong>Overview:</strong> {hotspot.description}</p>
                    <p><strong>Technical Details:</strong> {hotspot.details}</p>
                </div>
            );
        }

        // Main App component
        function App() {
            const [activeHotspot, setActiveHotspot] = useState(null);
            const [panelPosition, setPanelPosition] = useState({ x: 0, y: 0 });

            const handleHotspotClick = (hotspot) => {
                // Calculate panel position (center of screen for simplicity)
                setPanelPosition({
                    x: window.innerWidth / 2,
                    y: window.innerHeight / 2
                });
                setActiveHotspot(hotspot);
            };

            const handleClosePanel = () => {
                setActiveHotspot(null);
            };

            return (
                <>
                    <Canvas
                        camera={{ position: [5, 5, 5], fov: 60 }}
                        style={{ background: 'linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%)' }}
                    >
                        <Scene
                            onHotspotClick={handleHotspotClick}
                            activeHotspot={activeHotspot}
                        />
                    </Canvas>

                    <HotspotPanel
                        hotspot={activeHotspot}
                        onClose={handleClosePanel}
                        position={panelPosition}
                    />
                </>
            );
        }

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
